model Transaction {
  id         String          @id
  userId     String
  categoryId String?
  type       TransactionType

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  category Category?       @relation(fields: [categoryId], references: [id], onDelete: Cascade)
  user     User            @relation(fields: [userId], references: [id], onDelete: Cascade)
  rule     RecurringRule[]

  @@index([userId])
}

model RecurringRule {
  id            String      @id
  transactionId String
  transaction   Transaction @relation(fields: [transactionId], references: [id], onDelete: Cascade)

  amount    Decimal
  currency  String?
  frequency Frequency
  interval  Int       @default(1)
  startDate DateTime
  endDate   DateTime?

  byMonthDay Int?

  createdAt DateTime @default(now())

  @@index([transactionId])
}

model Category {
  id           String        @id
  name         String
  transactions Transaction[]

  @@unique([name])
}

enum TransactionType {
  INCOME
  COST
}

enum Frequency {
  DAILY
  WEEKLY
  MONTHLY
  YEARLY
}
